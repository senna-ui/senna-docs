import{r as t,c as s,h as i,H as h}from"./p-0466bc77.js";const e=class{constructor(i){t(this,i),this.senInput=s(this,"senInput",7),this.senChange=s(this,"senChange",7),this.options=[],this.value="",this.selectedIndex=-1,this.matchedOptions=[],this.open=!1,this.onInput=t=>{const s=t.target;s?(this.value=s.value||"",this.open=!0):this.open=!1,this.senInput.emit(t)},this.onSelectOption=t=>{this.senChange.emit({option:t}),this.value=t.label,this.open=!1},this.handleKeyDown=t=>{"ArrowDown"===t.key?(t.preventDefault(),this.selectedIndex=Math.min(this.matchedOptions.length-1,this.selectedIndex+1)):"ArrowUp"===t.key&&(t.preventDefault(),this.selectedIndex=Math.max(-1,this.selectedIndex-1))},this.handleKeyboardSelect=t=>{"Enter"===t.key&&this.selectedIndex>-1&&(t.preventDefault(),this.onSelectOption(this.matchedOptions[this.selectedIndex]))},this.handleFocus=()=>{this.selectedIndex=-1}}watchHandler(){this.matchedOptions=Boolean(this.value)?this.options.filter(t=>t.label.toLowerCase().includes(this.value.toLowerCase())):[]}render(){return i(h,null,i("div",{class:"typeahead",onKeyDown:this.handleKeyboardSelect},i("sen-input",{onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,value:this.value,onSenInput:this.onInput}),this.open&&i("ul",{class:"typeahead__options"},this.matchedOptions.map((t,s)=>i("li",{class:s===this.selectedIndex?"selected":""},i("a",{onClick:()=>this.onSelectOption(t)},function(t,s){const h=t.split(new RegExp(`(${s})`,"gi"));return i("span",null," ",h.map((t,h)=>i("span",{key:h,class:t.toLowerCase()===s.toLowerCase()?"highlight":""},t))," ")}(t.label,this.value)))))))}static get watchers(){return{value:["watchHandler"]}}};e.style=":host{background:var(--sen-typeahead-bg, #494444);position:relative;display:block}ul,li{padding:0;margin:0}ul{border:1px solid #E9E6E6}li{list-style-type:none}a{display:block;padding:4px 8px;background-color:var(--sen-select-item-bg, #fff);color:var(--sen-select-item-color, #211010)}.highlight{font-weight:var(--sen-highlight-font-weight, 700);color:var(--sen-hightlight-color, #3B5F97)}.selected a{background:#dfe6f2}";export{e as sen_typeahead}